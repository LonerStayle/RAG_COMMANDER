# 외부 네트워크 접속 설정 가이드

## 개요
Streamlit과 FastAPI 서버를 인터넷 어디서나 접속할 수 있도록 포트 포워딩 설정하는 방법입니다.

## 사전 준비

### 1. 현재 컴퓨터의 내부 IP 확인
명령 프롬프트에서 실행:
```bash
ipconfig
```
출력에서 `IPv4 주소`를 확인합니다. 예: `192.168.0.100`

### 2. 공인 IP 확인
브라우저에서 접속:
- `https://www.whatismyip.com/`
- 또는 `https://ipconfig.me/`

표시된 IP 주소를 기록합니다. 예: `121.167.103.98`

## 포트 포워딩 설정

### 1. 공유기 관리자 페이지 접속
브라우저에서 접속:
- `http://192.168.0.1` 또는 `http://192.168.1.1`
- 공유기 뒷면에 적힌 주소 확인

### 2. 로그인
- ID/비밀번호는 공유기 뒷면에 있거나
- 기본값: `admin` / `admin`

### 3. 포트 포워딩 메뉴 찾기
공유기마다 메뉴 이름이 다를 수 있습니다:
- "포트 포워딩" 또는 "Port Forwarding"
- "가상 서버" 또는 "Virtual Server"
- "NAT 설정" → "포트 포워딩"

### 4. 포트 포워딩 규칙 추가

#### Streamlit (포트 8501)
- 서비스 포트: `8501`
- 내부 포트: `8501`
- IP 주소: `192.168.0.100` (1단계에서 확인한 주소)
- 프로토콜: `TCP`
- 상태: `사용함` 또는 `Enable`

#### FastAPI (포트 8080)
- 서비스 포트: `8080`
- 내부 포트: `8080`
- IP 주소: `192.168.0.100` (1단계에서 확인한 주소)
- 프로토콜: `TCP`
- 상태: `사용함` 또는 `Enable`

### 5. 저장 및 적용
설정을 저장하고 적용합니다.

## Windows 방화벽 설정

### 1. 방화벽 설정 열기
Windows 설정 → 방화벽 및 네트워크 보호 → 고급 설정

### 2. 인바운드 규칙 생성
1. "인바운드 규칙" → "새 규칙"
2. "포트" 선택 → 다음
3. "TCP" 선택 → "특정 로컬 포트": `8501, 8080` 입력 → 다음
4. "연결 허용" 선택 → 다음
5. 모든 프로필 체크 (도메인, 개인, 공용) → 다음
6. 이름: `Streamlit and FastAPI Ports` → 완료

## 서버 실행

### FastAPI 서버
```bash
uvicorn src.fastapi.main_api:app --host 0.0.0.0 --port 8080
```

### Streamlit 서버
```bash
streamlit run src/streamlit/web.py --server.address 0.0.0.0 --server.port 8501
```

## 접속 주소

### 같은 네트워크에서 접속
- Streamlit: `http://192.168.0.100:8501`
- FastAPI: `http://192.168.0.100:8080`

### 다른 네트워크(인터넷)에서 접속
- Streamlit: `http://공인IP:8501`
- FastAPI: `http://공인IP:8080`

예시:
- Streamlit: `http://121.167.103.98:8501`
- FastAPI: `http://121.167.103.98:8080`

## 주의사항

1. **공인 IP 변경**: 가정용 인터넷은 공인 IP가 자주 바뀝니다. 접속할 때마다 `whatismyip.com`에서 확인하세요.

2. **보안**: 외부 접근을 허용하면 보안 위험이 있습니다. 필요시 인증이나 접근 제한을 추가하세요.

3. **ISP 제한**: 일부 인터넷 사업자는 포트 포워딩을 막을 수 있습니다.

4. **공유기 재시작**: 설정이 적용되지 않으면 공유기를 재시작하세요.

## 문제 해결

### 접속이 안 될 때
1. 공인 IP가 변경되었는지 확인
2. Windows 방화벽 설정 확인
3. 공유기 방화벽 설정 확인
4. 서버가 실행 중인지 확인:
   ```bash
   netstat -ano | findstr :8501
   netstat -ano | findstr :8080
   ```

