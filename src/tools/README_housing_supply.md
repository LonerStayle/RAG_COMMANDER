# ì£¼íƒê³µê¸‰ í˜„í™© ë¶„ì„ ë„êµ¬ (Housing Supply Tool)

ì„œìš¸ì‹œ 25ê°œ êµ¬ì˜ ì£¼íƒê³µê¸‰ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” LangChain ë„êµ¬ ëª¨ìŒì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ì„¤ì¹˜ ë° ì„¤ì •](#ì„¤ì¹˜-ë°-ì„¤ì •)
2. [ê¸°ë³¸ ë„êµ¬](#ê¸°ë³¸-ë„êµ¬)
3. [ê³ ê¸‰ ë¶„ì„ ë„êµ¬](#ê³ ê¸‰-ë¶„ì„-ë„êµ¬)
4. [ì‚¬ìš© ì˜ˆì œ](#ì‚¬ìš©-ì˜ˆì œ)
5. [ë°ì´í„° í˜•ì‹ ìš”êµ¬ì‚¬í•­](#ë°ì´í„°-í˜•ì‹-ìš”êµ¬ì‚¬í•­)

---

## ì„¤ì¹˜ ë° ì„¤ì •

### í•„ìš”í•œ íŒ¨í‚¤ì§€

```bash
pip install pandas openpyxl langchain-core matplotlib
```

### import

```python
from tools.housing_supply_tool import (
    load_housing_supply_data,
    get_seoul_district_supply,
    get_supply_summary_by_district,
    analyze_yearly_supply,
    analyze_monthly_pattern,
    compare_districts_supply,
    generate_supply_report,
    get_housing_supply_tools  # ì „ì²´ ë„êµ¬ ë¦¬ìŠ¤íŠ¸
)
```

---

## ê¸°ë³¸ ë„êµ¬

### 1. load_housing_supply_data

ë°ì´í„° íŒŒì¼ì„ ë¡œë“œí•˜ê³  ê¸°ë³¸ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import load_housing_supply_data

result = load_housing_supply_data.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx"
})
print(result)
```

**Args:**
- `file_path` (str): Excel ë˜ëŠ” CSV íŒŒì¼ ê²½ë¡œ

**Returns:**
- ë°ì´í„° ë¡œë“œ ê²°ê³¼ ë° ê¸°ë³¸ ì •ë³´

---

### 2. get_seoul_district_supply

ì„œìš¸ 25ê°œ êµ¬ì˜ ê³µê¸‰ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import get_seoul_district_supply

# ì„œìš¸ ì „ì²´
result = get_seoul_district_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx"
})

# íŠ¹ì • êµ¬ë§Œ
result = get_seoul_district_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "district": "ê°•ë‚¨êµ¬"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `district` (Optional[str]): íŠ¹ì • êµ¬ ì´ë¦„ (Noneì´ë©´ ì „ì²´)
- `district_column` (str): êµ¬ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì‹œêµ°êµ¬")

**Returns:**
- ì„œìš¸ êµ¬ë³„ ê³µê¸‰ ë°ì´í„°

---

### 3. get_supply_summary_by_district

êµ¬ë³„ ê³µê¸‰ëŸ‰ì„ ì§‘ê³„í•˜ì—¬ ìˆœìœ„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import get_supply_summary_by_district

result = get_supply_summary_by_district.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "value_column": "ì„¸ëŒ€ìˆ˜"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `district_column` (str): êµ¬ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì‹œêµ°êµ¬")
- `value_column` (str): ì§‘ê³„í•  ê°’ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ê³µê¸‰ëŸ‰")

**Returns:**
- êµ¬ë³„ ì´ ê³µê¸‰ëŸ‰ (ë§ì€ ìˆœìœ¼ë¡œ ì •ë ¬)

---

## ê³ ê¸‰ ë¶„ì„ ë„êµ¬

### 4. analyze_yearly_supply

ì—°ë„ë³„ ê³µê¸‰ëŸ‰ ì¶”ì´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import analyze_yearly_supply

# ì„œìš¸ ì „ì²´ ì—°ë„ë³„
result = analyze_yearly_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "date_column": "ì—°ì›”",
    "value_column": "ê³µê¸‰ëŸ‰"
})

# íŠ¹ì • êµ¬ì˜ ì—°ë„ë³„
result = analyze_yearly_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "district": "ê°•ë‚¨êµ¬",
    "date_column": "ì—°ì›”"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `district` (Optional[str]): íŠ¹ì • êµ¬ (Noneì´ë©´ ì„œìš¸ ì „ì²´)
- `date_column` (str): ë‚ ì§œ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì—°ì›”")
- `value_column` (str): ì§‘ê³„ ê°’ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ê³µê¸‰ëŸ‰")

**Returns:**
- ì—°ë„ë³„ ì´ê³µê¸‰ëŸ‰, í‰ê· ê³µê¸‰ëŸ‰, ë°ì´í„°ê±´ìˆ˜

**ì¶œë ¥ ì˜ˆì‹œ:**
```
================================================================================
ì„œìš¸ ì „ì²´ ì—°ë„ë³„ ê³µê¸‰ëŸ‰
================================================================================
ì´ 10ê±´

ì—°ë„  ì´ê³µê¸‰ëŸ‰  í‰ê· ê³µê¸‰ëŸ‰  ë°ì´í„°ê±´ìˆ˜
2015   12000     1000        120
2016   15000     1250        120
2017   13500     1125        120
...
================================================================================
```

---

### 5. analyze_monthly_pattern

ì›”ë³„ ê³µê¸‰ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤ (ê³„ì ˆì„± íŒŒì•…).

```python
from tools.housing_supply_tool import analyze_monthly_pattern

result = analyze_monthly_pattern.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "district": "ì„œì´ˆêµ¬"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `district` (Optional[str]): íŠ¹ì • êµ¬ (Noneì´ë©´ ì„œìš¸ ì „ì²´)
- `date_column` (str): ë‚ ì§œ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì—°ì›”")
- `value_column` (str): ì§‘ê³„ ê°’ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ê³µê¸‰ëŸ‰")

**Returns:**
- ì›”ë³„ í‰ê· ê³µê¸‰ëŸ‰, ì´ê³µê¸‰ëŸ‰, ë°ì´í„°ê±´ìˆ˜

**ì¶œë ¥ ì˜ˆì‹œ:**
```
================================================================================
ì„œìš¸ ì „ì²´ ì›”ë³„ ê³µê¸‰ íŒ¨í„´
================================================================================
ì´ 12ê±´

 ì›”  í‰ê· ê³µê¸‰ëŸ‰  ì´ê³µê¸‰ëŸ‰  ë°ì´í„°ê±´ìˆ˜
  1       950    9500        50
  2      1050   10500        50
  3      1200   12000        50
...
================================================================================
```

---

### 6. compare_districts_supply

ì—¬ëŸ¬ êµ¬ì˜ ê³µê¸‰ëŸ‰ì„ ë¹„êµí•©ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import compare_districts_supply

# ê°•ë‚¨3êµ¬ ë¹„êµ
result = compare_districts_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "districts": "ê°•ë‚¨êµ¬,ì„œì´ˆêµ¬,ì†¡íŒŒêµ¬",
    "date_column": "ì—°ì›”"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `districts` (str): ì‰¼í‘œë¡œ êµ¬ë¶„ëœ êµ¬ ì´ë¦„ë“¤ (ì˜ˆ: "ê°•ë‚¨êµ¬,ì„œì´ˆêµ¬,ì†¡íŒŒêµ¬")
- `date_column` (Optional[str]): ë‚ ì§œ ì»¬ëŸ¼ (ì‹œê³„ì—´ ë¹„êµ)
- `district_column` (str): êµ¬ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì‹œêµ°êµ¬")
- `value_column` (str): ì§‘ê³„ ê°’ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ê³µê¸‰ëŸ‰")

**Returns:**
- êµ¬ë³„ ë¹„êµ ë°ì´í„° (ì‹œê³„ì—´ì´ë©´ ì—°ë„ë³„, ì•„ë‹ˆë©´ ì´í•©)

**ì¶œë ¥ ì˜ˆì‹œ:**
```
================================================================================
êµ¬ë³„ ê³µê¸‰ëŸ‰ ë¹„êµ (ê°•ë‚¨êµ¬, ì„œì´ˆêµ¬, ì†¡íŒŒêµ¬)
================================================================================
ì´ 30ê±´

ì—°ë„  ê³µê¸‰ëŸ‰      êµ¬
2015  1200   ê°•ë‚¨êµ¬
2015   980   ì„œì´ˆêµ¬
2015  1450   ì†¡íŒŒêµ¬
...
================================================================================
```

---

### 7. generate_supply_report

ì¢…í•© ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```python
from tools.housing_supply_tool import generate_supply_report

result = generate_supply_report.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "date_column": "ì—°ì›”",
    "district_column": "ì‹œêµ°êµ¬",
    "value_column": "ê³µê¸‰ëŸ‰"
})
```

**Args:**
- `file_path` (str): ë°ì´í„° íŒŒì¼ ê²½ë¡œ
- `date_column` (Optional[str]): ë‚ ì§œ ì»¬ëŸ¼ëª…
- `district_column` (str): êµ¬ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ì‹œêµ°êµ¬")
- `value_column` (str): ì§‘ê³„ ê°’ ì»¬ëŸ¼ëª… (ê¸°ë³¸ê°’: "ê³µê¸‰ëŸ‰")

**Returns:**
- ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸ (ê¸°ë³¸ í†µê³„, ê¸°ê°„, TOP 5 êµ¬, ì—°ë„ë³„ ì¶”ì´)

**ì¶œë ¥ ì˜ˆì‹œ:**
```
================================================================================
ì„œìš¸ì‹œ ì£¼íƒê³µê¸‰ í˜„í™© ì¢…í•© ë¦¬í¬íŠ¸
================================================================================

[1] ê¸°ë³¸ í†µê³„
--------------------------------------------------------------------------------
  ì´ ê³µê¸‰ëŸ‰: 150,000
  í‰ê·  ê³µê¸‰ëŸ‰: 1,250.00
  ìµœëŒ€ ê³µê¸‰ëŸ‰: 5,000
  ìµœì†Œ ê³µê¸‰ëŸ‰: 100

[2] ë¶„ì„ ê¸°ê°„
--------------------------------------------------------------------------------
  ì‹œì‘: 2015-01-01
  ì¢…ë£Œ: 2024-12-31
  ê¸°ê°„: ì•½ 10.0ë…„

[3] êµ¬ë³„ ê³µê¸‰ëŸ‰ TOP 5
--------------------------------------------------------------------------------
  1. ì†¡íŒŒêµ¬: 18,500
  2. ê°•ë‚¨êµ¬: 15,200
  3. ì„œì´ˆêµ¬: 12,800
  4. ê°•ì„œêµ¬: 11,500
  5. ì–‘ì²œêµ¬: 10,300

[4] ì—°ë„ë³„ ê³µê¸‰ëŸ‰ ì¶”ì´
--------------------------------------------------------------------------------
  2015ë…„: 12,000
  2016ë…„: 15,000
  2017ë…„: 13,500
  ...

================================================================================
ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ (2025-10-29 15:30:00)
================================================================================
```

---

## ì‚¬ìš© ì˜ˆì œ

### Agentì—ì„œ ì‚¬ìš©í•˜ê¸°

```python
from langchain.agents import create_tool_calling_agent
from langchain_openai import ChatOpenAI
from tools.housing_supply_tool import get_housing_supply_tools

# LLM ì´ˆê¸°í™”
llm = ChatOpenAI(model="gpt-4", temperature=0)

# ë„êµ¬ ê°€ì ¸ì˜¤ê¸°
tools = get_housing_supply_tools()

# Agent ìƒì„±
agent = create_tool_calling_agent(llm, tools, prompt)

# ì‹¤í–‰
result = agent.invoke({
    "input": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ì˜ ì—°ë„ë³„ ì£¼íƒ ê³µê¸‰ëŸ‰ì„ ë¶„ì„í•´ì£¼ì„¸ìš”"
})
```

### ì§ì ‘ í˜¸ì¶œ

```python
from tools.housing_supply_tool import analyze_yearly_supply

result = analyze_yearly_supply.invoke({
    "file_path": "data/ê³µê¸‰í˜„í™©.xlsx",
    "district": "ê°•ë‚¨êµ¬",
    "date_column": "ì—°ì›”",
    "value_column": "ì„¸ëŒ€ìˆ˜"
})

print(result)
```

---

## ë°ì´í„° í˜•ì‹ ìš”êµ¬ì‚¬í•­

### í•„ìˆ˜ ì»¬ëŸ¼

#### ê¸°ë³¸ ë„êµ¬ìš©

| ì»¬ëŸ¼ëª… ì˜ˆì‹œ | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ |
|-----------|------|---------|
| `ì‹œêµ°êµ¬` ë˜ëŠ” `ì§€ì—­` | í–‰ì •êµ¬ì—­ ì •ë³´ | âœ… í•„ìˆ˜ |
| `ê³µê¸‰ëŸ‰` ë˜ëŠ” `ì„¸ëŒ€ìˆ˜` | ê³µê¸‰ëŸ‰ ê°’ | âœ… í•„ìˆ˜ |

#### ê³ ê¸‰ ë¶„ì„ ë„êµ¬ìš© (ì‹œê³„ì—´ ë¶„ì„)

| ì»¬ëŸ¼ëª… ì˜ˆì‹œ | ì„¤ëª… | í•„ìˆ˜ì—¬ë¶€ |
|-----------|------|---------|
| `ì—°ì›”` ë˜ëŠ” `ë‚ ì§œ` | ë‚ ì§œ ì •ë³´ (YYYY-MM, YYYYMM ë“±) | âœ… í•„ìˆ˜ |
| `ì‹œêµ°êµ¬` ë˜ëŠ” `ì§€ì—­` | í–‰ì •êµ¬ì—­ ì •ë³´ | âœ… í•„ìˆ˜ |
| `ê³µê¸‰ëŸ‰` ë˜ëŠ” `ì„¸ëŒ€ìˆ˜` | ê³µê¸‰ëŸ‰ ê°’ | âœ… í•„ìˆ˜ |

### ë°ì´í„° ì˜ˆì‹œ

#### Excel/CSV í˜•ì‹

```csv
ì—°ì›”,ì‹œêµ°êµ¬,ê³µê¸‰ëŸ‰
2024-01,ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬,120
2024-01,ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬,95
2024-02,ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬,110
2024-02,ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬,100
...
```

ë˜ëŠ”

```csv
ë‚ ì§œ,ì§€ì—­,ì„¸ëŒ€ìˆ˜
202401,ê°•ë‚¨êµ¬,120
202401,ì„œì´ˆêµ¬,95
202402,ê°•ë‚¨êµ¬,110
...
```

---

## ì„œìš¸ 25ê°œ êµ¬ ëª©ë¡

ë„êµ¬ëŠ” ë‹¤ìŒ 25ê°œ êµ¬ë¥¼ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ì—¬ í•„í„°ë§í•©ë‹ˆë‹¤:

```
ì¢…ë¡œêµ¬, ì¤‘êµ¬, ìš©ì‚°êµ¬, ì„±ë™êµ¬, ê´‘ì§„êµ¬
ë™ëŒ€ë¬¸êµ¬, ì¤‘ë‘êµ¬, ì„±ë¶êµ¬, ê°•ë¶êµ¬, ë„ë´‰êµ¬
ë…¸ì›êµ¬, ì€í‰êµ¬, ì„œëŒ€ë¬¸êµ¬, ë§ˆí¬êµ¬, ì–‘ì²œêµ¬
ê°•ì„œêµ¬, êµ¬ë¡œêµ¬, ê¸ˆì²œêµ¬, ì˜ë“±í¬êµ¬, ë™ì‘êµ¬
ê´€ì•…êµ¬, ì„œì´ˆêµ¬, ê°•ë‚¨êµ¬, ì†¡íŒŒêµ¬, ê°•ë™êµ¬
```

---

## ë¬¸ì œ í•´ê²°

### Q1. "ë‚ ì§œ ë³€í™˜ ì‹¤íŒ¨" ì—ëŸ¬

**ì›ì¸:** ë‚ ì§œ ì»¬ëŸ¼ í˜•ì‹ì´ ì¸ì‹ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
- ë‚ ì§œ í˜•ì‹ì„ í™•ì¸í•˜ê³  Excelì—ì„œ "2024-01" ë˜ëŠ” "202401" í˜•ì‹ìœ¼ë¡œ í†µì¼
- ë˜ëŠ” ë°ì´í„° ì „ì²˜ë¦¬ í›„ ì‚¬ìš©

### Q2. "ì»¬ëŸ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ì—ëŸ¬

**ì›ì¸:** ì»¬ëŸ¼ ì´ë¦„ì´ ë‹¤ë¦„

**í•´ê²°:**
- `district_column`, `date_column`, `value_column` íŒŒë¼ë¯¸í„°ë¡œ ì‹¤ì œ ì»¬ëŸ¼ ì´ë¦„ ì§€ì •

```python
result = analyze_yearly_supply.invoke({
    "file_path": "data.xlsx",
    "date_column": "ê¸°ì¤€ì›”",  # ì‹¤ì œ ì»¬ëŸ¼ ì´ë¦„
    "value_column": "ì‹ ê·œì„¸ëŒ€ìˆ˜"  # ì‹¤ì œ ì»¬ëŸ¼ ì´ë¦„
})
```

### Q3. ì„œìš¸ êµ¬ê°€ ì œëŒ€ë¡œ í•„í„°ë§ ì•ˆ ë¨

**ì›ì¸:** êµ¬ ì´ë¦„ í˜•ì‹ì´ ë‹¤ë¦„

**í•´ê²°:**
- ë°ì´í„°ì˜ êµ¬ ì´ë¦„ì´ "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬" ë˜ëŠ” "ê°•ë‚¨êµ¬" í˜•íƒœì—¬ì•¼ í•¨
- ë‹¤ë¥¸ í˜•íƒœë¼ë©´ ë°ì´í„° ì „ì²˜ë¦¬ í•„ìš”

---

## ë¼ì´ì„ ìŠ¤

MIT License

## ì‘ì„±ì

RAG Commander Team

## ìµœì¢… ì—…ë°ì´íŠ¸

2025-10-29
